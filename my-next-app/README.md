# 프로젝트 이슈 기록

## 날짜: 2024년 6월 10일

### 이슈: Task 인터페이스 및 타입 일관성 이슈

기존 태스크 관리 앱에서는 태스크 생성 시간을 기록하지 않았으며, Task 인터페이스의 일관성 부족과 명확하지 않은 타입 정의로 인해 에러가 발생.

#### 해결 방법:

- Task 인터페이스에 `time` 속성을 추가하여 태스크 생성 시간을 ISO 문자열 형식으로 저장.
- `types.ts` 파일을 생성하고 여기에 Task 인터페이스를 정의한 후, 필요한 모든 컴포넌트에서 이를 import하여 사용.
- AddTask 컴포넌트와 TaskItem 컴포넌트를 수정하여 새로운 태스크에 자동으로 현재 시간을 추가하고, 이 시간을 사용자의 로컬 시간 형식으로 표시.

### 이슈: 사용자 인터페이스 개선 이슈

사용자 인터페이스의 개선 및 등록한 task의 내용을 보여줄 필요.

#### 해결 방법:

- TaskItem 컴포넌트에 클릭 이벤트를 추가하여 제목 클릭 시 조건부로 상세 내용이 토글되도록 구현.
- 전체 애플리케이션에 Helvetica 폰트를 적용하고 Header 컴포넌트의 폰트 조절.

### 이슈: 기능 추가 이슈

사용자가 등록한 task를 삭제하는 기능이 필요.

#### 해결 방법:

- TaskItem의 각 리스트에 index를 지정한 뒤, 해당되는 item을 필터링하여 새로운 item으로 구성된 리스트를 보여줌으로써 삭제되도록 구현.

## 날짜: 2024년 6월 16일

### 이슈: 아이템 추가 이슈

사용자가 등록한 task를 삭제하는 기능 필요.

#### 해결 방법:

- TaskItem의 각 리스트에 UUID를 사용하여 고유 식별자를 부여하고, 해당 식별자를 통해 태스크를 삭제하도록 구현.
- 삭제 버튼 클릭 시 서버에 DELETE 요청을 보내 데이터베이스에서 해당 태스크를 삭제하고, 로컬 상태에서도 즉시 삭제하여 UI를 업데이트.

### 이슈: 백엔드 이슈

태스크 추가 시 데이터베이스에 저장되지 않거나 삭제 시 업데이트되지 않는 문제 발생.

#### 해결 방법:

- 서버에서 데이터베이스 쿼리 실행 시 발생하는 오류를 디버깅하여 SQL 구문과 데이터 타입이 일치하는지 확인.
- 기존 데이터베이스 스키마를 수정하여 `id` 필드를 TEXT 형식으로 설정하고, 새로운 테이블을 생성하여 데이터 타입 불일치 문제 해결.
- 백엔드 라우트에서 SQL 쿼리와 값을 콘솔에 출력하여 디버깅.

## 날짜: 2024년 6월 17일

### 이슈: Vercel에서의 배포 문제

Vercel에서 Express.js와 SQLite3로 구성한 백엔드를 배포하는 과정에서 문제가 발생. 또한 환경변수를 읽어오는 과정에서 문제.

#### 해결 방법:

1. **Vercel과 Express.js, SQLite3의 호환성 문제**:

   - Vercel은 기본적으로 서버리스 환경을 지원하며, 지속적으로 실행되는 서버보다는 요청에 따라 실행되는 함수를 권장.
   - Express.js와 SQLite3는 지속적인 서버 연결을 요구하기 때문에 Vercel의 서버리스 환경과 잘 맞지 않음.
   - SQLite3는 파일 기반 데이터베이스로, 서버리스 환경에서 파일 시스템 접근이 제한적이어서 문제 발생.

2. **환경변수 문제**:

   - Vercel에서 환경변수를 설정할 때 `.env.local` 파일을 제대로 읽어오지 못함.
   - 환경변수를 설정할 때 Vercel의 환경설정 메뉴를 통해 직접 입력하거나, 프로젝트 설정 파일에 환경변수를 명시적으로 추가하여 해결.

3. **Supabase로 전환**:

   - Vercel의 서버리스 환경과 잘 맞는 외부 데이터베이스 서비스로 Supabase를 선택.
   - Supabase는 Postgres 기반의 데이터베이스 서비스로, 클라이언트 라이브러리를 통해 쉽게 연결할 수 있으며, 서버리스 함수와의 통합이 용이.
   - Supabase 설정:
     - `NEXT_PUBLIC_SUPABASE_URL`과 `NEXT_PUBLIC_SUPABASE_ANON_KEY` 환경변수를 사용하여 Supabase 클라이언트를 초기화.
     - 데이터베이스 쿼리를 수정하여 Supabase의 API를 통해 데이터에 접근.

4. **데이터베이스 초기화 문제 해결**:
   - Supabase의 관리자 페이지를 통해 직접 테이블을 생성하고 초기 데이터를 입력하여 초기화 문제를 해결.

### 해결 방법:

- Vercel의 서버리스 환경에서는 지속적인 데이터베이스 연결을 유지하는 것이 어렵기 때문에, 외부 데이터베이스 서비스를 사용하는 것이 적합함.
- Supabase는 Postgres 기반의 데이터베이스 서비스로, 클라이언트 라이브러리를 통해 쉽게 연결할 수 있으며, 서버리스 함수와의 통합이 용이함.
- 환경변수를 사용하여 Supabase 클라이언트를 초기화하고, 필요한 쿼리를 수행하는 방식으로 백엔드를 재구성.

### 앞으로의 백엔드 구성 방안:

- **외부 DB 사용**: 서버리스 환경에서 데이터베이스를 관리하기 위해 외부 데이터베이스 서비스를 사용하는 것이 바람직(예를 들어, Supabase, Firebase, AWS RDS 등이 있음)
- **서버리스 함수**: Vercel, AWS Lambda 등과 같은 서버리스 플랫폼을 활용하여 백엔드를 구성하면, 요청에 따라 실행되는 함수로 효율적인 리소스 사용이 가능.
